import{j as e,A as g,m as c,r as b,B as m}from"./index-B1S_F-6_.js";import{u as y,a as v,b as N}from"./validators-BqRfyaxh.js";function w({isOpen:l,title:s,children:r,onClose:a}){return e.jsx(g,{children:l?e.jsx(c.div,{className:"fixed inset-0 z-50 flex items-end justify-center bg-slate-900/40 p-4 sm:items-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:a,children:e.jsxs(c.div,{className:"card-surface w-full max-w-lg p-5",initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:20,opacity:0},onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:s}),e.jsx("button",{className:"rounded-lg p-1 text-slate-500 transition hover:bg-slate-100 hover:text-slate-700",onClick:a,"aria-label":"Close modal",children:"X"})]}),r]})}):null})}function k({isOpen:l,onClose:s,onSubmit:r}){const[a,i]=b.useState(0),{register:o,handleSubmit:x,setValue:d,watch:u,reset:h,formState:{errors:n,isSubmitting:p}}=y({resolver:v(N),defaultValues:{rating:0,comment:""}}),j=u("rating"),f=async t=>{await r(t),h(),s()};return e.jsx(w,{isOpen:l,onClose:s,title:"Rate this transaction",children:e.jsxs("form",{className:"space-y-3",onSubmit:x(f),children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Rating"}),e.jsx("div",{className:"mt-1 flex items-center gap-1",children:[1,2,3,4,5].map(t=>e.jsx("button",{type:"button",className:`text-2xl ${t<=(a||j)?"text-amber-400":"text-slate-300"}`,onMouseEnter:()=>i(t),onMouseLeave:()=>i(0),onClick:()=>d("rating",t,{shouldValidate:!0}),children:"*"},t))}),n.rating?.message?e.jsx("span",{className:"text-xs text-rose-600",children:n.rating.message}):null]}),e.jsxs("label",{className:"flex flex-col gap-1.5 text-sm text-slate-700",children:[e.jsx("span",{className:"font-medium",children:"Comment"}),e.jsx("textarea",{className:"input-base min-h-24 resize-none",placeholder:"Share your experience with this seller",...o("comment")}),n.comment?.message?e.jsx("span",{className:"text-xs text-rose-600",children:n.comment.message}):null]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-1",children:[e.jsx(m,{variant:"secondary",onClick:s,children:"Cancel"}),e.jsx(m,{type:"submit",disabled:p,children:"Submit Review"})]})]})})}export{w as M,k as R};
